---
import BaseLayout from "../layouts/BaseLayout.astro";

const title = "Contact National Debt Service";
const description =
  "Contact National Debt Service about the website itself. We can’t give debt advice, but you can share feedback or flag problems with the site.";

const { searchParams } = Astro.url;
const status = searchParams.get("status");
---

<BaseLayout {title} {description}>
  <main id="main-content" class="bg-primary-50 min-h-screen">
    <section class="mx-auto max-w-3xl px-4 py-10 sm:py-14 space-y-6">
      <header class="space-y-3">
        <p class="text-xs font-semibold uppercase tracking-wide text-primary-700">
          Contact Us
        </p>
        <h1>Contact National Debt Service</h1>
        <p class="text-base text-slate-800 leading-relaxed">
          You can contact us about the website itself – for example, to report a broken link,
          suggest an accessibility improvement, or raise a concern about any of the content.
        </p>
      </header>

      <section class="space-y-3">
        <h2 class="text-xl font-semibold text-slate-900">Before you get in touch</h2>
        <p class="text-sm text-slate-800 leading-relaxed">
          We can’t give you debt advice or tell you what to do about your situation. We also
          can’t contact creditors or advice charities on your behalf.
        </p>
        <p class="text-sm text-slate-800 leading-relaxed">
          If you need help with debt or money worries, please use the links on the{" "}
          <a href="/get-help">Where to get help</a> page.
        </p>
      </section>

      {
        status === "success" && (
          <div role="alert" class="rounded-lg bg-green-50 border border-green-200 p-4 space-y-1">
            <h2 class="text-base font-semibold text-green-800 mb-0">Message sent!</h2>
            <p class="text-sm text-green-700">
              Thanks for getting in touch. We’ll get back to you as soon as possible.
            </p>
          </div>
        )
      }
      {
        status === "error" && (
          <div role="alert" class="rounded-lg bg-red-50 border border-red-200 p-4 space-y-1">
            <h2 class="text-base font-semibold text-red-800 mb-0">Something went wrong</h2>
            <p class="text-sm text-red-700">
              There was an issue sending your message. Please try again or email us directly at
              contact@nationaldebtservice.co.uk.
            </p>
          </div>
        )
      }
      <form
        name="contact"
        method="POST"
        netlify-honeypot="bot-field"
        data-netlify="true"
        action="/contact?status=success"
        class="rounded-xl border border-neutral-border bg-white p-6 shadow-md space-y-4"
      >
        <input type="hidden" name="form-name" value="contact" />
        <div class="space-y-2">
          <label for="email" class="text-sm font-medium text-slate-800">
            Your email address (required)
          </label>
          <input
            id="email"
            name="email"
            type="email"
            autocomplete="email"
            required
            placeholder="name@example.com"
            class="w-full rounded-md border border-slate-300 px-3 py-2 text-sm text-slate-900 shadow-sm focus-visible:border-primary-700 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-primary-700"
          />
          <p class="text-xs text-slate-600">
            We’ll only use this email address to reply to your message about the website.
          </p>
        </div>

        <div class="space-y-2">
          <label for="message" class="text-sm font-medium text-slate-800">
            Your message (required)
          </label>
          <textarea
            id="message"
            name="message"
            rows={5}
            required
            placeholder="I found a broken link..."
            class="w-full rounded-md border border-slate-300 px-3 py-2 text-sm text-slate-900 shadow-sm focus-visible:border-primary-700 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-primary-700"
          />
          <p class="text-xs text-slate-600">
            Please don’t include any financial, health, or other highly sensitive details. A short description is enough.
          </p>
        </div>

        <div class="space-y-2 rounded-md bg-slate-50 px-3 py-3">
          <div class="flex items-start gap-2">
            <input
              id="consent"
              name="consent"
              type="checkbox"
              required
              class="mt-1 h-4 w-4 rounded border-slate-300 text-primary-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-700"
            />
            <label for="consent" class="text-xs text-slate-800 leading-relaxed">
              I understand this site can’t give me personal debt advice and is for general
              information only. I’ve read and agree to the{" "}
              <a href="/privacy">Privacy notice</a> and{" "}
              <a href="/terms">Terms of use</a>.
            </label>
          </div>
          <p class="text-[11px] text-slate-600">
            We’ll use the information you send only to handle your message about the website.
          </p>
        </div>

        <div class="pt-2">
          <button
            type="submit"
            class="btn-primary w-full sm:w-auto justify-center"
            aria-label="Send your message about the National Debt Service website"
          >
            Send message
          </button>
        </div>
      </form>
    </section>
  </main>
</BaseLayout>